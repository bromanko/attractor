// Large pipeline with 15+ nodes â€” stress test for traversal
digraph LargePipeline {
  graph [goal="Stress test traversal"]
  start [shape=Mdiamond]
  exit  [shape=Msquare]

  plan       [shape=box, prompt="Create plan"]
  design     [shape=box, prompt="Design architecture"]
  review_d   [shape=diamond, label="Design OK?"]
  impl_core  [shape=box, prompt="Implement core"]
  impl_api   [shape=box, prompt="Implement API"]
  impl_ui    [shape=box, prompt="Implement UI"]
  test_unit  [shape=parallelogram, label="Unit tests", tool_command="echo unit_pass"]
  test_int   [shape=parallelogram, label="Integration tests", tool_command="echo int_pass"]
  gate_test  [shape=diamond, label="Tests pass?"]
  rev_code   [shape=box, prompt="Review: code"]
  rev_sec    [shape=box, prompt="Review: security"]
  rev_perf   [shape=box, prompt="Review: performance"]
  gate_rev   [shape=diamond, label="Reviews pass?"]
  fix        [shape=box, prompt="Fix issues", max_retries=1]
  deploy     [shape=box, prompt="Deploy"]

  start      -> plan -> design -> review_d
  review_d   -> impl_core [condition="outcome=success"]
  review_d   -> plan       [condition="outcome!=success"]
  impl_core  -> impl_api -> impl_ui
  impl_ui    -> test_unit -> test_int -> gate_test
  gate_test  -> rev_code [condition="outcome=success"]
  gate_test  -> fix      [condition="outcome!=success"]
  rev_code   -> rev_sec  [condition="outcome=success"]
  rev_code   -> gate_rev [condition="outcome!=success"]
  rev_sec    -> rev_perf [condition="outcome=success"]
  rev_sec    -> gate_rev [condition="outcome!=success"]
  rev_perf   -> gate_rev
  gate_rev   -> deploy [condition="outcome=success"]
  gate_rev   -> fix    [condition="outcome!=success"]
  fix        -> test_unit
  deploy     -> exit
}
