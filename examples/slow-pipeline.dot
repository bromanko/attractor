// A slow pipeline for testing UI feedback.
// Each stage sleeps so the widget/status updates are visible.
digraph SlowPipeline {
  graph [goal="Test that pipeline UI shows progress for slow stages"]

  start [shape=Mdiamond, label="Start"]
  exit  [shape=Msquare,  label="Exit"]

  step1 [
    shape=parallelogram,
    label="Step 1: Counting",
    tool_command="bash -lc 'for i in 1 2 3 4 5; do echo \"Step 1 iteration $i\"; sleep 1; done; echo Done'"
  ]

  step2 [
    shape=parallelogram,
    label="Step 2: Building",
    tool_command="bash -lc 'echo \"Compiling...\"; sleep 2; echo \"Linking...\"; sleep 1; echo \"Build complete\"'"
  ]

  step3 [
    shape=parallelogram,
    label="Step 3: Testing (fails)",
    tool_command="bash -lc 'echo \"Running tests...\"; sleep 2; echo \"FAIL  test/widget-display\" >&2; echo \"Tests: 1 failed, 2 passed\" >&2; exit 1'"
  ]

  start -> step1 -> step2 -> step3 -> exit
}
